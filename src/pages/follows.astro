---
import MainCenter from "../components/MainCenter.astro";
import Page from "../layouts/Page.astro";
import { getSubscriptions } from "../api/feedbin";

const subscriptions = await getSubscriptions().then((subs) =>
	subs.filter((sub) => sub.site_url !== Astro.site?.toString()),
);
---

<Page
	headProps={{
		title: "Kevin's RSS Subscriptions",
	}}
>
	<MainCenter>
		<div class="space-y-16">
			<h1 class="text-3xl font-blackest">Kevin follows</h1>
			<ul class="space-y-4 columns-1 md:columns-2">
				{
					subscriptions.map((sub) => (
						<li class="flex items-baseline gap-2">
							<img
								class="self-baseline h-[1.4ex] w-[1.4ex]"
								height="16"
								width="16"
								src={`https://www.google.com/s2/favicons?sz=64&domain_url=${sub.site_url}`}
								alt={sub.title}
							/>

							<a href={sub.site_url}>{sub.title}</a>
						</li>
					))
				}
			</ul>
		</div>
	</MainCenter>
</Page>
