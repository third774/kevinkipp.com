---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Body from "../components/Body.astro";
import Hr from "../components/Hr.astro";
import Footer from "../components/Footer.astro";
import FormattedDate from "../components/FormattedDate.astro";
import Header from "../components/Header.astro";
import Main from "../components/Main.astro";
import Html from "./Html.astro";
import Share from "../components/Share.astro";
import ColumnWrapper from "../components/ColumnWrapper.astro";
import H1 from "../components/H1.astro";

type Props = {
	post: CollectionEntry<"blog">;
	minutesRead: number;
};

const { data, slug } = Astro.props.post;

const { title, description, published, updatedDate, heroImage, heroAlt } = data;
---

<Html>
	<BaseHead title={title} description={description} />
	<Body>
		<Header />
		<Main>
			<ColumnWrapper>
				<article class="space-y-12">
					<div class="my-16 space-y-3">
						<H1>
							{title}
						</H1>
						<div class="text-sm subtle">
							<FormattedDate
								date={published}
								year="numeric"
								month="short"
								day="numeric"
							/> â€¢ <span>
								~{Astro.props.minutesRead}
							</span>
						</div>
						{
							updatedDate && (
								<div>
									Last updated on <FormattedDate date={updatedDate} />
								</div>
							)
						}
						<p class="subtle">
							{description}
						</p>
						{
							heroImage && (
								<div class="hero-image">
									<Image
										class="max-w-full"
										width={1020}
										height={510}
										src={heroImage}
										alt={heroAlt ?? ""}
									/>
								</div>
							)
						}
					</div>
					<Hr />
					<div class="flow">
						<slot />
					</div>
					{
						Astro.site && (
							<Share
								title={title}
								url={`${Astro.site.toString()}blog/${slug}`}
							/>
						)
					}
				</article>
			</ColumnWrapper>
		</Main>
		<Footer />
	</Body>
</Html>
